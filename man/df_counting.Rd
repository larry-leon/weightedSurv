% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/df_counting.R
\name{df_counting}
\alias{df_counting}
\title{Weighted and stratified survival analysis with Cox and logrank tests}
\usage{
df_counting(
  df,
  tte.name = "tte",
  event.name = "event",
  treat.name = "treat",
  weight.name = NULL,
  strata.name = NULL,
  arms = c("treat", "control"),
  time.zero = 0,
  tpoints.add = c(0),
  by.risk = 6,
  time.zero.label = 0,
  risk.add = NULL,
  get.cox = TRUE,
  cox.digits = 2,
  lr.digits = 2,
  cox.eps = 0.001,
  lr.eps = 0.001,
  verbose = FALSE,
  qprob = 0.5,
  scheme = "fh",
  scheme_params = list(rho = 0, gamma = 0),
  conf_level = 0.95,
  check.KM = TRUE,
  check.seKM = FALSE,
  draws = 0,
  seedstart = 8316951,
  stop.onerror = FALSE,
  censoring_allmarks = TRUE
)
}
\arguments{
\item{df}{Data frame containing survival data.}

\item{tte.name}{Name of the time-to-event column in df.}

\item{event.name}{Name of the event indicator column in df (1=event, 0=censored).}

\item{treat.name}{Name of the treatment/group column in df (must be coded as 0=control, 1=experimental).}

\item{weight.name}{Optional; name of the weights column in df.}

\item{strata.name}{Optional; name of the strata column in df.}

\item{arms}{Character vector of group labels (default c("treat","control")).}

\item{time.zero}{Numeric; time value to use as zero (default 0).}

\item{tpoints.add}{Numeric vector; additional time points to include (default c(0)).}

\item{by.risk}{Numeric; interval for risk points (default 6).}

\item{time.zero.label}{Numeric; label for time zero (default 0.0).}

\item{risk.add}{Numeric vector; additional risk points to include (default NULL).}

\item{get.cox}{Logical; whether to fit Cox model (default TRUE).}

\item{cox.digits}{Integer; number of digits for Cox output (default 2).}

\item{lr.digits}{Integer; number of digits for logrank output (default 2).}

\item{cox.eps}{Numeric; threshold for Cox p-value formatting (default 0.001).}

\item{lr.eps}{Numeric; threshold for logrank p-value formatting (default 0.001).}

\item{verbose}{Logical; print warnings/errors (default FALSE).}

\item{qprob}{Numeric; quantile probability for KM quantile table (default 0.5).}

\item{scheme}{Character; weighting scheme for logrank/FH test (default "fh").}

\item{scheme_params}{List; parameters for weighting scheme (default list(rho = 0, gamma = 0)).}

\item{conf_level}{Numeric; confidence level for quantiles (default 0.95).}

\item{check.KM}{Logical; check KM curve fits (default TRUE).}

\item{check.seKM}{Logical; check KM standard error fits (default FALSE).}

\item{draws}{Integer; number of draws for variance estimation (default 0).}

\item{seedstart}{Integer; random seed for draws (default 8316951).}

\item{stop.onerror}{Logical; stop on error (default FALSE).}

\item{censoring_allmarks}{Logical; if FALSE, remove events from censored (default TRUE).}
}
\value{
A list containing Cox model results, logrank results, risk/event sets, KM curves, quantiles, variance estimates, and diagnostic checks.
}
\description{
Performs weighted and/or stratified survival analysis, including Cox proportional hazards model,
logrank/Fleming-Harrington tests, and calculation of risk/event sets, Kaplan-Meier curves, quantiles, and variance estimates.
}
